jobs:
  include:
  - language: go
    go: 1.11.x
    node_js: lts/*

    git:
      depth: false

    addons:
      sonarcloud:
        organization: chrootlogin-github
        token:
          secure: s9mgCpDUXgIs5o7ohsfobITrwVnuCziVrrsA4sSe5qlijfw3rmjCaGlqswErb9O/LRB4zSSJnzVFxjItNkiX3doA6FBXEHl5U2JC7ioMy0gXiBgFvLwSDg/CodSmQhNRwBdDgkwDRkrhW1ciY2lS8qd9N3fCaKlC4NlpfhF2/e0h6YGp1pOQNqC6t7NqBN9/2ZtVIFNt5cGDRkaIDVEL4lnBcwva/tMQf5mxMPgLg5pAueHO3CriO5zbuOySZhPpguC4wytVLzxNUZWi8j8TapnNjLOMho9R9UoWs0fe8yLLwbWTYZdAb9qhylhv/iskMD07m/Ewun/kN2FfU0n3FZsARqM2ByRyNnAdWbUp3i4m8D0Ge5gVk23HI8OmTdguU/1qzJ4SGgdDTpxAitTD81k5IaA0vmEJgK375QdGLa4sI569opyH83nldZzo33OpyoufxyZ3sqzCG6pS7heJGobEPRcHGWjwRiw/YK8Bex/LAfELjPbjpiWQ8ByKFNjkYrew0qmFnbF96YYNRmjxk0xHw4DDvikZ9I6GB6DntIztVWhgY/BcRvBFCfEaaFANOswANFEvrx0QbeTlO25qHWVVxyubb0IotM8toR1DIeA5rlSaWty4J23mr3ZIPZeKI+VwWzb/itmMZ2van9zKW+hMtztiw1V5RyL4C/aEOQk=

    cache:
      directories:
      - vendor

    before_script:
    - curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh

    install:
    - # skip

    script:
    - make deps
    - go test -json -coverprofile=coverage.out ./... > test-report.out
    - sonar-scanner
    - make go_app