jobs:
  include:
  - language: go
    go: 1.11.x
    node_js: lts/*

    git:
      depth: false

    addons:
      sonarcloud:
        organization: chrootlogin-github
        token:
          secure: q+ozIMpRwgMEpJMxe1yxCYBT4vPDqQReetUTsw74zwdHfOb4uZzkZxFQ3Ji7O3ULukI0C1WksSu5WME5K6CKEmzNfWCkBomZRKpvcaOQms8DjFEWZr8AcHbyuolFDDLHg/g3nCdC2znT+0h89+ApWeUnSK74uT/CMAF70pI1QsbL8pbssjpjY++2VW2aMrcnxqF+KMy7rcIkzQ0GXW8MQmK5uxKsYkJKD/Gwelj+PQFpi/gyzAHatkiNwxgL/l/fS/1UiJSw/Ph1wuoA2XqOUbdP92wqZinX8BXXuAxE1YUxdk8rAbc5RrYJBarSWP3otsPw9J+0IRuVUaj9L1mZzHKaRySgUt/IvcD1SGSTrtzJ0/5fkS2Q2059YZpuRicFr/ZZp3pNTqd41b6745hExxHrPHxzg3Mn/dZNyVy1Z68f6D/UTZkAZqQBxyps6rw48wbJNGdNUZi98yyyL/OTYuwufhtXXXQx/tb4QWSrmxdpoavNdTeCH+Vvu4p616reLibO2bKtF+zdSRJWcH7IRFzaQv0OIyTDXo+EMT1YPsQ4177d+haXlLokTmMOqyX8SuMrRk64Yyq5uNovd/214uWLgmMnL0lHKuftJZtybQU0aPxTl0AMQ7oTCtwS7Sj/i9lAe+6U2J5JHTDJ/XtNZnNk9EOV0WvF6OSvbrpsECg=

    cache:
      directories:
      - vendor

    before_script:
    - curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh

    install:
    - # skip

    script:
    - make deps
    - go test -json -coverprofile=coverage.out ./... > test-report.out
    - sonar-scanner
    - make go_app